<local:AppSettingsPageBase x:Class="Tuvi.App.Shared.Views.AppSettingsPage"
                           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                           xmlns:controls="using:Eppie.App.UI.Controls"
                           xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                           xmlns:local="using:Tuvi.App.Shared.Views"
                           xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                           xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
                           xmlns:viewmodels="using:Tuvi.App.ViewModels"
                           Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
                           Loaded="OnLoaded"
                           mc:Ignorable="d">

    <local:AppSettingsPageBase.DataContext>
        <viewmodels:SettingsPageViewModel />
    </local:AppSettingsPageBase.DataContext>

    <local:AppSettingsPageBase.Resources>

        <Style x:Key="SettingsSectionSubtitleTextBlockStyle"
               BasedOn="{StaticResource SubtitleTextBlockStyle}"
               TargetType="TextBlock">
            <Setter Property="FontSize" Value="18" />
            <Setter Property="FontWeight" Value="Medium" />
            <Setter Property="Margin" Value="0,0,0,24" />
        </Style>

        <x:Double x:Key="NormalOptionGapHeight">36</x:Double>
        <x:Double x:Key="GroupOptionGapHeight">24</x:Double>
        <x:Double x:Key="EndSectionOptionGapHeight">48</x:Double>

        <x:Double x:Key="NormalOptionControlWidth">276</x:Double>
        <x:Double x:Key="ButtonMinWidth">80</x:Double>

        <Thickness x:Key="PageHorizontalContentPadding">44,0,48,0</Thickness>

        <DataTemplate x:Key="UIScaleItemTemplate">
            <TextBlock Text="{Binding Converter={StaticResource UIScaleToStringConverter}}" />
        </DataTemplate>
    </local:AppSettingsPageBase.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Grid Grid.Row="0"
              Margin="0,24"
              Padding="{StaticResource PageHorizontalContentPadding}">

            <TextBlock x:Uid="ApplicationSettingsTitle" FontSize="14" />

            <Button HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Command="{x:Bind ViewModel.WipeApplicationDataCommand}">
                <StackPanel Orientation="Horizontal">
                    <!--  ToDo: Issue #840 - &#xF3B1; icon not showing in desktop app (default font is uno-fluentui-assets.ttf)  -->
                    <FontIcon FontSize="16" Glyph="&#xF3B1;" />
                    <TextBlock x:Uid="SignOutButtonContent" Margin="4,0,0,0" />
                </StackPanel>
            </Button>
        </Grid>

        <ScrollViewer Grid.Row="1" Padding="{StaticResource PageHorizontalContentPadding}">
            <StackPanel x:Name="SettingsControl" Margin="0,0,0,24">

                <TextBlock x:Uid="AppearanceSettingsSectionSubtitle" Style="{StaticResource SettingsSectionSubtitleTextBlockStyle}" />

                <controls:OptionControl x:Uid="LanguageOption" GapHeight="{StaticResource NormalOptionGapHeight}">
                    <Grid>
                        <controls:LanguageSelectionControl x:Name="LanguageSelector"
                                                           Width="{StaticResource NormalOptionControlWidth}"
                                                           HorizontalAlignment="Left"
                                                           LanguageChangedHandler="OnLanguageChanged"
                                                           ManifestLanguages="{x:Bind ViewModel.ManifestLanguages, Mode=OneTime}" />
                        <TextBlock HorizontalAlignment="Right"
                                   Foreground="{ThemeResource TextFillColorSecondary}"
                                   Style="{StaticResource BodyTextBlockStyle}">
                            <Span>
                                <Hyperlink NavigateUri="{Binding Source={StaticResource Brand}, Path=Translation}">
                                    <Run x:Uid="HelpTranslate" />
                                </Hyperlink>
                            </Span>
                        </TextBlock>
                    </Grid>
                </controls:OptionControl>

                <controls:OptionControl x:Uid="UIScaleOption" GapHeight="{StaticResource NormalOptionGapHeight}">
                    <ComboBox Width="{StaticResource NormalOptionControlWidth}"
                              HorizontalAlignment="Left"
                              ItemTemplate="{StaticResource UIScaleItemTemplate}"
                              ItemsSource="{x:Bind ViewModel.UIScaleOptions, Mode=OneWay}"
                              SelectedItem="{x:Bind ViewModel.SelectedUIScale, Mode=TwoWay}" />
                </controls:OptionControl>

                <controls:OptionControl x:Uid="ThemesOption" GapHeight="{StaticResource EndSectionOptionGapHeight}">
                    <ComboBox x:Name="ThemeCombobox"
                              Width="{StaticResource NormalOptionControlWidth}"
                              HorizontalAlignment="Left"
                              SelectedIndex="{x:Bind ViewModel.ThemeSelectedIndex, Mode=TwoWay}">
                        <ComboBoxItem x:Uid="ThemeOptionSystem" />
                        <ComboBoxItem x:Uid="ThemeOptionLight" />
                        <ComboBoxItem x:Uid="ThemeOptionDark" />
                    </ComboBox>
                </controls:OptionControl>

                <TextBlock x:Uid="SecuritySettingsSectionSubtitle" Style="{StaticResource SettingsSectionSubtitleTextBlockStyle}" />

                <controls:OptionControl x:Uid="LaunchPasswordOption"
                                        GapHeight="{StaticResource NormalOptionGapHeight}"
                                        HideNote="True">
                    <Grid>
                        <ToggleSwitch x:Name="LaunchPasswordToggle"
                                      HorizontalAlignment="Left"
                                      VerticalAlignment="Center"
                                      IsOn="{x:Bind ViewModel.IsLaunchPasswordEnabled, Mode=TwoWay}" />
                        <Button x:Uid="ChangeMasterPasswordButton"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                Command="{x:Bind ViewModel.ChangeMasterPasswordCommand}" />
                    </Grid>
                </controls:OptionControl>

                <controls:OptionControl x:Uid="SeedPhraseOption" GapHeight="{StaticResource GroupOptionGapHeight}">
                    <muxc:Expander x:Uid="SeedPhraseExpander"
                                   HorizontalAlignment="Stretch"
                                   HorizontalContentAlignment="Stretch">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <!--  ToDo: Issue #840 - Add logic  -->
                            <TextBlock Grid.Column="0"
                                       HorizontalAlignment="Left"
                                       VerticalAlignment="Center"
                                       IsTextSelectionEnabled="True"
                                       Text="Not implemented"
                                       TextWrapping="WrapWholeWords" />
                            <!--  ToDo: Issue #840 - Add copy command  -->
                            <Button Grid.Column="1"
                                    Margin="8,0,0,0"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Center">
                                <StackPanel Orientation="Horizontal">
                                    <SymbolIcon Symbol="Copy" />
                                    <TextBlock x:Uid="CopySeedPhraseButtonContent" Margin="4,0,0,0" />
                                </StackPanel>
                            </Button>
                        </Grid>
                    </muxc:Expander>
                </controls:OptionControl>

                <controls:OptionControl x:Uid="ConfirmSeedPhraseOption"
                                        GapHeight="{StaticResource NormalOptionGapHeight}"
                                        HideNote="True">
                    <Grid>
                        <Button x:Uid="ConfirmSeedPhraseButton"
                                MinWidth="{StaticResource ButtonMinWidth}"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Center"
                                Command="{x:Bind ViewModel.ConfirmSeedPhraseCommand}" />
                        <TextBlock x:Uid="ConfirmSeedPhraseNote"
                                   HorizontalAlignment="Right"
                                   VerticalAlignment="Center"
                                   Foreground="{ThemeResource SystemFillColorCriticalBrush}" />
                    </Grid>
                </controls:OptionControl>

                <controls:OptionControl x:Uid="ExportToFileOption" GapHeight="{StaticResource GroupOptionGapHeight}">
                    <Button MinWidth="{StaticResource ButtonMinWidth}"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Top"
                            Command="{x:Bind ViewModel.ExportBackupCommand}"
                            CommandParameter="{StaticResource FileOperationProvider}"
                            Content="Export" />
                </controls:OptionControl>

                <controls:OptionControl x:Uid="RestoreFromFileOption"
                                        GapHeight="{StaticResource NormalOptionGapHeight}"
                                        HideNote="True">
                    <Button x:Uid="RestoreFromFileButton"
                            MinWidth="{StaticResource ButtonMinWidth}"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Command="{x:Bind ViewModel.ImportBackupCommand}"
                            CommandParameter="{StaticResource FileOperationProvider}" />
                </controls:OptionControl>

                <controls:OptionControl x:Uid="EncryptionKeyOption" GapHeight="{StaticResource EndSectionOptionGapHeight}">
                    <Grid>
                        <Button x:Uid="EncryptionKeyImportButton"
                                MinWidth="{StaticResource ButtonMinWidth}"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Command="{x:Bind ViewModel.ImportEncryptionKeyCommand}" />

                        <HyperlinkButton MinWidth="{StaticResource ButtonMinWidth}"
                                         HorizontalAlignment="Right"
                                         VerticalAlignment="Top"
                                         Command="{x:Bind ViewModel.OpenAllPgpKeysCommand}">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock x:Uid="ViewAllEncryptionKeyButtonContent" />
                                <FontIcon Margin="4,0,0,0"
                                          FontSize="16"
                                          Glyph="&#xE76C;" />
                            </StackPanel>
                        </HyperlinkButton>
                    </Grid>
                </controls:OptionControl>


                <TextBlock x:Uid="DevelopmentSettingsSectionSubtitle" Style="{StaticResource SettingsSectionSubtitleTextBlockStyle}" />

                <controls:OptionControl x:Uid="LoggingOption" GapHeight="{StaticResource EndSectionOptionGapHeight}">
                    <Grid>
                        <ComboBox Width="{StaticResource NormalOptionControlWidth}"
                                  HorizontalAlignment="Left"
                                  VerticalAlignment="Top"
                                  ItemsSource="{x:Bind ViewModel.LogLevels, Mode=OneWay}"
                                  SelectedItem="{x:Bind ViewModel.SelectedLogLevel, Mode=TwoWay}" />

                        <Button x:Uid="OpenLogFolderButton"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Top"
                                Command="{x:Bind ViewModel.OpenLogFolderCommand}">
                            <ToolTipService.ToolTip>
                                <TextBlock Text="{x:Bind ViewModel.LogFolder, Mode=OneTime}" TextWrapping="Wrap" />
                            </ToolTipService.ToolTip>
                        </Button>
                    </Grid>
                </controls:OptionControl>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</local:AppSettingsPageBase>
