<shared:AIAgentUserControl x:Class="Eppie.App.UI.Controls.MessageControl"
                           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                           xmlns:controls="using:Microsoft.UI.Xaml.Controls"
                           xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                           xmlns:local="using:Eppie.App.UI.Controls"
                           xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                           xmlns:shared="using:Eppie.App.UI.Controls"
                           d:DesignHeight="300"
                           d:DesignWidth="400"
                           Loaded="OnLoaded"
                           Unloaded="OnUnloaded"
                           mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!--  Blocked content info bar  -->
        <controls:InfoBar x:Name="BlockedContentBanner"
                          x:Uid="/Eppie.App.UI/Controls/BlockedContentBanner"
                          Grid.Row="0"
                          IsIconVisible="True"
                          IsOpen="{x:Bind ExternalContentBlocked, Mode=OneWay}"
                          Severity="Warning">
            <controls:InfoBar.ActionButton>
                <Button x:Uid="/Eppie.App.UI/Controls/BlockedContentBannerActionButton"
                        Margin="8,0,0,0"
                        Command="{x:Bind AllowExternalCommand}" />
            </controls:InfoBar.ActionButton>
        </controls:InfoBar>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition x:Name="SecondColumn" Width="0" />
            </Grid.ColumnDefinitions>

            <Grid Grid.Column="0">
                <controls:WebView2 x:Name="HtmlView" Visibility="{x:Bind HasHtmlBody, Mode=OneWay}" />

                <ScrollViewer Padding="4" Visibility="{x:Bind HasHtmlBody, Converter={StaticResource InverseBoolToVisibilityConverter}, Mode=OneWay}">
                    <TextBlock IsTextSelectionEnabled="True"
                               Style="{StaticResource MessageTextStyle}"
                               Text="{x:Bind TextBody, Mode=OneWay}" />
                </ScrollViewer>
            </Grid>

            <ScrollViewer Grid.Column="1"
                          Padding="4"
                          Visibility="{x:Bind HasAIAgentProcessedBody, Mode=OneWay}">
                <TextBlock IsTextSelectionEnabled="True"
                           Style="{StaticResource MessageTextStyle}"
                           Text="{x:Bind AIAgentProcessedBody, Mode=OneWay}" />
            </ScrollViewer>

        </Grid>
    </Grid>
</shared:AIAgentUserControl>
